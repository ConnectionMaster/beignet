<h1>TODO</h1>

<p>The compiler is far from complete. Even if the skeleton is now done and should
be solid, There are a <em>lot</em> of things to do from trivial to complex.</p>

<h2>OpenCL standard library</h2>

<p>Today we define the OpenCL API in header file <code>src/ocl_stdlib.h</code>. This file is
from being complete.</p>

<p>By the way, one question remains: do we want to implement
the high-precision functions as <em>inline</em> functions or as external functions to
call? Indeed, inlining all functions may lead to severe code bloats while
calling functions will require to implement a proper ABI. We certainly want to
do both actually.</p>

<h2>LLVM front-end</h2>

<p>The code is defined in <code>src/llvm/</code>.  We used the PTX ABI and the OpenCL profile
to compile the code. Therefore, a good part of the job is already done. However,
many things must be implemented:</p>

<ul>
<li><p>Lowering down of various intrinsics like <code>llvm.memcpy</code></p></li>
<li><p>Implementation of most of the OpenCL built-ins (<code>native_cos</code>, <code>native_sin</code>,
atomic operations, barriers...)</p></li>
<li><p>Lowering down of int16 / int8 / float16 / char16 / char8 / char4 loads and
stores into the supported loads and stores</p></li>
<li><p>Support for constant buffers declared in the OpenCL source file</p></li>
<li><p>Support for local declaration of local array (the OpenCL profile will properly
declare them as global arrays)</p></li>
<li><p>Support for doubles</p></li>
<li><p>Support for images. This will require to ensure that images are only directly
accessed</p></li>
<li><p>Better resolving of the PHI functions. Today, we always generate MOV
instructions at the end of each basic block . They can be easily optimized.</p></li>
</ul>

<h2>Gen IR</h2>

<p>The code is defined in <code>src/ir/</code>. Main things to do are:</p>

<ul>
<li><p>Bringing support for doubles</p></li>
<li><p>Adding proper support for SAMPLE and TYPED_WRITE instructions</p></li>
<li><p>Adding support for BARRIER instructions</p></li>
<li><p>Adding support for all the math instructions (native<em>cos, native</em>sin...)</p></li>
<li><p>Finishing the handling of function arguments (see the <a href="gen_ir.html">IR
description</a> for more details)</p></li>
<li><p>Adding support for constant data per unit</p></li>
<li><p>Adding support for linking IR units together</p></li>
</ul>

<h2>Backend</h2>

<p>The code is defined in <code>src/backend</code>. Main things to do are:</p>
